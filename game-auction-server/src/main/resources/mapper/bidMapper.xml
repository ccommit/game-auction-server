<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ccommit.gameauctionserver.mapper.BidMapper">
    <insert id="registrationItem" parameterType="com.ccommit.gameauctionserver.dto.User">
        <selectKey keyProperty="id" resultType="int" order="BEFORE">
            SELECT IFNULL(MAX(id), 0) + 1 FROM bid
        </selectKey>
        INSERT INTO bid (   id
                            ,create_time
                            ,limit_time
                            ,price
                            ,start_price
                            ,present_price
                            ,seller_id
                            ,issold
                            ,item_id)
        VALUES ( #{id}
                ,NOW()
                ,DATE_ADD(NOW(), INTERVAL 1 DAY)
                ,#{price}
                ,#{startPrice}
                ,#{startPrice}
                ,#{sellerID}
                ,#{isSold}
                ,#{itemID});
    </insert>

    <delete id="deleteItemToBid">
        DELETE FROM bid
        WHERE limit_time &lt; NOW()
    </delete>
</mapper>