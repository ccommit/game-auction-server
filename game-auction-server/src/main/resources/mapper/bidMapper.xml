<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ccommit.gameauctionserver.mapper.BidMapper">
    <insert id="registrationItem" parameterType="com.ccommit.gameauctionserver.dto.User">
        <selectKey keyProperty="id" order="AFTER" resultType="int">
            SELECT LAST_INSERT_ID()
        </selectKey>
        INSERT INTO bid (    create_time
                            ,limit_time
                            ,price
                            ,start_price
                            ,present_price
                            ,seller_id
                            ,issold
                            ,item_id)

        VALUES (             NOW()
                            ,DATE_ADD(NOW(), INTERVAL 1 DAY)
                            ,#{price}
                            ,#{startPrice}
                            ,#{startPrice}
                            ,#{sellerId}
                            ,#{isSold}
                            ,#{itemId});
    </insert>

    <select id="readLastItemToBid" resultType="com.ccommit.gameauctionserver.dto.Bid">
        SELECT  *
        FROM    bid
        WHERE   id = LAST_INSERT_ID()
    </select>

    <select id="readUserItemsToBid" resultType="com.ccommit.gameauctionserver.dto.Bid">
        SELECT  *
        FROM    bid
        WHERE   seller_id = #{userId}
    </select>


</mapper>